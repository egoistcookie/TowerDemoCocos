# 签到功能使用说明

## 功能概述

游戏新增每日签到功能，玩家每天可以签到一次，获得500点经验值奖励。

## 实现文件

1. **CheckInManager.ts** - 签到管理器
   - 负责处理签到逻辑
   - 检查今天是否已签到
   - 记录签到日期
   - 发放经验值奖励

2. **UIManager.ts** - UI管理器（已修改）
   - 添加了签到按钮属性
   - 初始化签到管理器
   - 处理签到按钮点击事件
   - 更新签到按钮状态（已签到时置灰）

## 配置步骤

### 1. 在Cocos Creator编辑器中配置签到按钮

1. 在游戏首页（GameMainPanel）创建一个签到按钮节点
2. 为按钮添加 `Button` 组件
3. 为按钮添加 `Sprite` 组件，设置签到按钮的贴图
4. 配置按钮的正常状态和按下状态贴图
5. 将签到按钮节点拖拽到 UIManager 组件的 `Check In Button` 属性槽中

### 2. 准备贴图资源

需要准备两张贴图：
- 签到按钮正常状态贴图
- 签到按钮按下状态贴图

建议放在 `assets/resources/textures/icon/` 目录下

## 功能特性

### 签到奖励
- 每次签到奖励：**500点经验值**
- 每日只能签到一次
- 签到记录保存在本地存储中

### 按钮状态
- **未签到**：按钮正常显示，可点击
- **已签到**：按钮置灰（半透明），不可点击
- 每天0点后自动重置，可再次签到

### 提示信息
- 签到成功：显示"签到成功！获得 500 点经验值"
- 已签到：显示"今天已经签到过了，明天再来吧！"
- 签到后自动刷新等级HUD，显示新的经验值和等级

## 技术实现

### 数据存储
- 使用 `sys.localStorage` 存储最后签到日期
- 存储键名：`TowerDemo_LastCheckInDate`
- 日期格式：`YYYY-MM-DD`

### 经验值发放
- 通过 `PlayerDataManager.addExp()` 方法添加经验值
- 自动触发升级逻辑
- 自动保存玩家数据

### 单例模式
- CheckInManager 使用单例模式
- 全局只有一个实例
- 在 UIManager 初始化时自动创建

## 注意事项

1. 签到按钮必须在编辑器中手动配置到 UIManager 的 `checkInButton` 属性
2. 签到按钮应该放在游戏首页（GameMainPanel），确保玩家容易找到
3. 签到记录基于本地日期，不依赖服务器时间
4. 清除浏览器缓存或本地存储会重置签到记录

## 扩展建议

如果需要扩展签到功能，可以考虑：
- 连续签到奖励递增
- 签到日历显示
- 补签功能
- 签到统计（总签到天数）
- 服务器端验证（防止作弊）
