# 古树防线

## 游戏简介

在暗夜精灵的古老森林中，生命之树正遭受兽人大军的威胁。作为精灵指挥官，你需要建造战争古树、月亮井等防御建筑，训练弓箭手、女猎手等精灵战士，构筑坚固防线。通过合理的建筑布局、单位生产和资源管理，抵御一波波敌人的进攻，在10分钟内守护生命之树不被摧毁。

## 核心玩法

- **塔防策略**：在指定网格区域建造防御建筑，合理布局阻挡敌人
- **单位生产**：通过战争古树、猎手大厅等建筑训练精灵战士
- **资源管理**：合理使用金币建造建筑，管理人口上限
- **多波次防御**：抵御20波敌人进攻，每5波出现一次挑战提示
- **单位控制**：可多选单位进行移动和战术部署

## 技术信息

- **开发引擎**：Cocos Creator 3.8.7
- **开发语言**：TypeScript
- **目标平台**：微信小程序
- **游戏类型**：塔防策略

## 项目结构

```
assets/
├── scripts/          # TypeScript脚本文件
│   ├── GameManager.ts      # 游戏主控制器
│   ├── Crystal.ts          # 生命之树（水晶）逻辑
│   ├── WarAncientTree.ts   # 战争古树
│   ├── HunterHall.ts       # 猎手大厅
│   ├── MoonWell.ts         # 月亮井
│   ├── Arrower.ts          # 弓箭手
│   ├── Hunter.ts           # 女猎手
│   ├── Role.ts             # 我方单位基类
│   ├── Build.ts            # 建筑基类
│   ├── Enemy.ts            # 敌人基类
│   └── ...                 # 其他脚本
├── scenes/           # 游戏场景
└── prefabs/          # 预制体资源
```

## 主要单位

### 友方单位
- **弓箭手**：远程攻击单位，射速较快
- **女猎手**：投掷回旋镖，可弹射多个敌人
- **精灵剑士**：近战单位，高血量
- **牧师**：治疗友方单位
- **小精灵**：可依附建筑进行治疗

### 建筑单位
- **战争古树**：生产弓箭手，拥有远程攻击能力
- **猎手大厅**：生产女猎手
- **剑士小屋**：生产精灵剑士
- **教堂**：生产牧师
- **月亮井**：恢复周围单位生命值，增加人口上限
- **石墙**：阻挡敌人前进的障碍物

### 敌方单位
- **兽人战士**：近战敌人
- **兽人督军**：强化版兽人，拥有战争咆哮技能
- **巨魔投矛手**：远程攻击敌人

## 游戏界面与场景

### 主界面（首页）

**场景风格**：暗夜精灵森林主题，采用竖版俯视视角，Q版像素风格。整体背景为暗夜精灵森林风格，四周是茂密的森林，中间有一块空地，放置着一颗尚在幼年期的生命之树。背景采用统一的暗夜精灵森林风格图片，营造神秘而宁静的氛围。

**界面布局**：
- **底部三页签**：位于屏幕最底部，高度200像素，包含三个页签按钮
  - **游戏页签**：点击进入游戏主体界面
  - **天赋页签**：点击进入天赋强化界面
  - **设置页签**：点击进入游戏设置界面
- **三页共用背景**：三个页面共用同一张暗夜精灵森林背景图，确保视觉统一
- **半透明遮罩**：页面切换时使用半透明黑色遮罩（透明度150），保持背景可见的同时突出内容

### 游戏游玩界面

**场景风格**：延续主界面的暗夜精灵森林风格，采用竖版俯视视角。游戏场景为一片开阔的森林空地，中央位置是生命之树（水晶），四周是茂密的森林边界。场景采用Q版像素风格，色彩以深绿色、紫色、金色为主，体现暗夜精灵的神秘与优雅。
这是一张竖构图的2D游戏场景背景图片，采用了柔和的卡通手绘风格。画面的主体是一条宽阔的沙土色道路，从底部一直延伸至顶部。道路两侧被茂密的绿色森林所包围，树木呈现出圆润、层叠的形态。

在画面的上方，横亘着一排整齐的方形石块障碍物，石块表面斑驳并覆盖着青苔。画面的底部正中央矗立着一个造型独特的树形建筑，它由盘根错节的枯木构成，树干中心镶嵌着一块带有神庙图案的方形标志，周围散落着零星的碎石和落叶。整体画面给人一种策略塔防类游戏的视觉感受。

**主要场景元素**：
- **生命之树（水晶）**：位于场景中央，是玩家需要守护的核心目标，呈现为幼年期的生命之树形态，散发着柔和的蓝色光芒
- **建筑网格区域**：位于画面下方，4x4的透明网格面板，每个格子100x100像素，格子间隔10像素，用于建造防御建筑
- **石墙网格区域**：位于画面中下方（y坐标500-1000），15x10的网格，每个格子50x50像素，用于建造石墙障碍物
- **敌人刷新点**：位于屏幕正上方，敌人从上方不断刷新并向生命之树进攻
- **单位战斗区域**：整个场景都是战斗区域，精灵战士在此与敌人战斗

**UI元素布局**：
- **顶部信息栏**：显示生命之树血量、金币数量、人口数量、游戏倒计时
- **建造按钮**：位于屏幕右下角，点击进入建造模式
- **建筑物选择面板**：点击建造按钮后，在屏幕下方弹出，占屏幕约六分之一高度，显示可建造的建筑图标
- **单位信息面板**：选中单位时，在屏幕下方显示单位详细信息，包括属性、操作按钮等
- **倒计时弹窗**：每5波敌人出现时，在屏幕右上角显示倒计时提示，可手动关闭

### 天赋界面

**场景风格**：与主界面共用同一张暗夜精灵森林背景图，保持视觉一致性。界面采用卡片式布局，展示各个单位的强化选项。

**界面元素**：
- **单位卡片**：以九宫格形式展示，每个卡片显示单位的icon图片
- **详细信息面板**：点击卡片后显示单位的详细属性展示页面
- **卡片边框**：支持添加边框贴图，增强视觉效果
- **蓝色主题**：天赋面板采用蓝色调，与游戏主体页面区分

### 设置界面

**场景风格**：同样使用暗夜精灵森林背景图，保持整体风格统一。

**界面元素**：
- **音效开关**：可打开或关闭游戏音效
- **其他设置选项**：预留扩展空间，可添加更多游戏设置

## 游戏特色

- 暗夜精灵主题，Q版像素风格
- 丰富的单位类型和建筑系统
- 策略性的建筑布局和单位部署
- 多波次敌人挑战，难度递增
- 天赋系统，可强化单位属性
- 统一的视觉风格，沉浸式游戏体验

## 开发状态

项目正在持续开发中，更多功能和优化正在添加。

