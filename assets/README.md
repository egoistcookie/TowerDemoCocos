# 塔防游戏项目说明

## 项目概述

这是一个使用Cocos Creator 3.8.7开发的简单塔防游戏MVP，目标平台为微信小程序。

## 项目结构

```
assets/
├── scripts/          # TypeScript脚本文件
│   ├── GameManager.ts      # 游戏主控制器
│   ├── Crystal.ts          # 水晶逻辑
│   ├── Enemy.ts            # 敌人逻辑
│   ├── EnemySpawner.ts     # 敌人生成器
│   ├── Tower.ts            # 防御塔逻辑
│   ├── TowerBuilder.ts     # 建造系统
│   ├── UIManager.ts        # UI管理器
│   └── ExplosionEffect.ts  # 爆炸效果
├── scenes/           # 游戏场景
│   └── README.md     # 场景设置说明
└── prefabs/          # 预制体资源（需要在编辑器中创建）
```

## 核心功能

### 1. 水晶系统
- 初始血量：100点
- 被敌人攻击会减少血量
- 血量归零时触发爆炸效果并游戏失败

### 2. 敌人系统
- 从四周不断刷新
- 向中央水晶移动
- 优先攻击防御塔，无防御塔时攻击水晶
- 死亡时倒下并渐隐消失

### 3. 防御塔系统
- 自动攻击范围内的敌人
- 可被敌人攻击
- 血量归零时爆炸

### 4. 建造系统
- 点击按钮进入建造模式
- 点击地图上的位置建造防御塔
- 建造范围：距离水晶80-300像素

### 5. 游戏规则
- 水晶血量归零：游戏失败
- 坚持3分钟：游戏胜利

## 使用说明

### 1. 在Cocos Creator编辑器中设置场景

请参考 `scenes/README.md` 中的详细说明创建场景和节点结构。

### 2. 创建预制体

需要创建以下预制体：
- Enemy.prefab - 敌人预制体
- Tower.prefab - 防御塔预制体
- Explosion.prefab（可选）- 爆炸效果预制体

### 3. 配置节点属性

在编辑器中为各个节点配置脚本属性：
- GameManager节点：绑定水晶、UI标签等引用
- EnemySpawner节点：绑定敌人预制体和容器
- TowerBuilder节点：绑定防御塔预制体和容器

### 4. 运行游戏

在编辑器中点击运行按钮，或构建到微信小程序平台。

## 游戏参数

### 默认参数设置

- **敌人刷新**：每2.5秒生成1个敌人
- **敌人属性**：
  - 血量：30点
  - 移动速度：50像素/秒
  - 攻击伤害：5点
  - 攻击间隔：2秒
  - 攻击范围：50像素

- **防御塔属性**：
  - 血量：50点
  - 攻击范围：200像素
  - 攻击伤害：10点
  - 攻击间隔：1秒

- **水晶属性**：
  - 血量：100点

- **游戏时长**：180秒（3分钟）

## 注意事项

1. 所有脚本已创建完成，需要在Cocos Creator编辑器中：
   - 创建场景并设置节点结构
   - 创建预制体并绑定脚本
   - 配置各个节点的属性引用

2. 纹理资源可以使用简单几何图形：
   - 水晶：圆形Sprite（蓝色）
   - 敌人：方形Sprite（红色）
   - 防御塔：三角形Sprite（绿色）

3. 适配微信小程序时，注意：
   - Canvas设计分辨率设置为750x1334
   - 启用Fit Height和Fit Width
   - 测试触摸事件在小程序中的表现

## 扩展建议

- 添加多种敌人类型
- 添加多种防御塔类型
- 添加资源系统（建造需要消耗资源）
- 添加关卡系统
- 添加音效和背景音乐
- 优化视觉效果和动画

